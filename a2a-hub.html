<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A2A Hub — Agent-to-Agent Protocol Hub | Cortex</title>
<style>
  :root {
    --bg: #0B0F19;
    --bg-surface: #131825;
    --bg-card: #1A1F2E;
    --bg-card-hover: #222840;
    --border: #2A3050;
    --text: #E2E8F0;
    --text-muted: #8892B0;
    --text-dim: #5A6380;
    --accent-blue: #60A5FA;
    --accent-purple: #A78BFA;
    --accent-green: #34D399;
    --accent-amber: #FBBF24;
    --accent-rose: #FB7185;
    --gradient-1: linear-gradient(135deg, #60A5FA, #A78BFA);
    --gradient-2: linear-gradient(135deg, #34D399, #60A5FA);
    --gradient-3: linear-gradient(135deg, #FBBF24, #FB7185);
    --gradient-4: linear-gradient(135deg, #A78BFA, #FB7185);
    --font-mono: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
    --font-sans: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
    --max-w: 1200px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    font-size: 16px;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-sans);
    line-height: 1.7;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
  }

  /* ---- NAV ---- */
  nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    background: rgba(11, 15, 25, 0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    transition: box-shadow 0.3s;
  }
  nav.scrolled { box-shadow: 0 4px 30px rgba(0,0,0,0.4); }
  .nav-inner {
    max-width: var(--max-w);
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px;
  }
  .nav-brand {
    font-weight: 700;
    font-size: 1.25rem;
    letter-spacing: -0.02em;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    color: var(--text);
  }
  .nav-brand .logo-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: var(--gradient-1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 800;
    color: var(--bg);
  }
  .nav-left {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }
  .nav-separator {
    color: var(--text-dim);
    font-size: 1.25rem;
    font-weight: 300;
    user-select: none;
  }
  .nav-project {
    font-weight: 600;
    font-size: 1rem;
    color: var(--accent-blue);
    letter-spacing: -0.01em;
  }
  .nav-links {
    display: flex;
    gap: 2rem;
    list-style: none;
    align-items: center;
  }
  .nav-links a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--text); }
  .nav-cta {
    background: var(--gradient-1);
    color: var(--bg) !important;
    padding: 0.4rem 1rem;
    border-radius: 6px;
    font-weight: 600 !important;
  }

  /* ---- HERO ---- */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 6rem 2rem 4rem;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: -40%;
    left: 50%;
    transform: translateX(-50%);
    width: 900px;
    height: 900px;
    background: radial-gradient(circle, rgba(96,165,250,0.1) 0%, rgba(167,139,250,0.04) 40%, transparent 70%);
    pointer-events: none;
  }
  .hero::after {
    content: '';
    position: absolute;
    bottom: -20%;
    left: 50%;
    transform: translateX(-50%);
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(96,165,250,0.05) 0%, transparent 60%);
    pointer-events: none;
  }
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.35rem 1rem;
    border: 1px solid var(--border);
    border-radius: 999px;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 2rem;
    background: var(--bg-surface);
  }
  .hero-badge .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent-blue);
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }
  .hero h1 {
    font-size: clamp(3rem, 7vw, 5.5rem);
    font-weight: 800;
    letter-spacing: -0.04em;
    line-height: 1.05;
    margin-bottom: 1.5rem;
  }
  .hero h1 .gradient-text {
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero .subtitle {
    font-size: 1.25rem;
    color: var(--text-muted);
    max-width: 680px;
    margin: 0 auto 3rem;
    line-height: 1.6;
  }
  .hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
    font-family: var(--font-sans);
  }
  .btn-primary {
    background: var(--gradient-1);
    color: var(--bg);
  }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(96,165,250,0.25); }
  .btn-secondary {
    background: var(--bg-card);
    color: var(--text);
    border: 1px solid var(--border);
  }
  .btn-secondary:hover { background: var(--bg-card-hover); border-color: var(--text-dim); }

  /* ---- TERMINAL PREVIEW ---- */
  .terminal-preview {
    max-width: 720px;
    width: 100%;
    margin: 4rem auto 0;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    text-align: left;
  }
  .terminal-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
  }
  .terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }
  .terminal-dot.red { background: #FF5F57; }
  .terminal-dot.yellow { background: #FEBC2E; }
  .terminal-dot.green { background: #28C840; }
  .terminal-title {
    font-size: 0.75rem;
    color: var(--text-dim);
    font-family: var(--font-mono);
    margin-left: auto;
    margin-right: auto;
  }
  .terminal-body {
    padding: 1.25rem;
    font-family: var(--font-mono);
    font-size: 0.85rem;
    line-height: 1.8;
    color: var(--text-muted);
    overflow-x: auto;
  }
  .terminal-body .prompt { color: var(--accent-green); }
  .terminal-body .cmd { color: var(--text); }
  .terminal-body .comment { color: var(--text-dim); }
  .terminal-body .output { color: var(--accent-blue); }
  .terminal-body .accent { color: var(--accent-amber); }
  .terminal-body .success { color: var(--accent-green); }

  /* ---- SECTIONS ---- */
  section {
    padding: 6rem 2rem;
    max-width: var(--max-w);
    margin: 0 auto;
  }
  .section-label {
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent-blue);
    margin-bottom: 0.75rem;
  }
  .section-title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 800;
    letter-spacing: -0.03em;
    line-height: 1.15;
    margin-bottom: 1rem;
  }
  .section-desc {
    font-size: 1.1rem;
    color: var(--text-muted);
    max-width: 640px;
    margin-bottom: 3rem;
    line-height: 1.6;
  }

  /* ---- STATS BAR ---- */
  .stats-bar {
    display: flex;
    justify-content: center;
    gap: 4rem;
    flex-wrap: wrap;
    padding: 3rem 2rem;
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    margin: 0 auto;
    max-width: var(--max-w);
  }
  .stat {
    text-align: center;
  }
  .stat-value {
    font-size: 2.5rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .stat-label {
    font-size: 0.8rem;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 600;
    margin-top: 0.25rem;
  }

  /* ---- PROTOCOL DIAGRAM ---- */
  .protocol-visual {
    position: relative;
    padding: 3rem 2rem 4rem;
    margin-bottom: 4rem;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
  }
  .protocol-visual::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(96,165,250,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(96,165,250,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
  }

  .diagram-container {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }

  .diagram-title {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-dim);
    margin-bottom: 0.5rem;
  }

  /* Hub center */
  .hub-center {
    position: relative;
    width: 280px;
    border-radius: 16px;
    padding: 2px;
    background: var(--gradient-1);
  }
  .hub-center-inner {
    background: var(--bg-card);
    border-radius: 14px;
    padding: 1.75rem 1.5rem;
    text-align: center;
  }
  .hub-center-title {
    font-size: 1.25rem;
    font-weight: 800;
    letter-spacing: 0.02em;
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.25rem;
  }
  .hub-center-port {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--accent-blue);
    margin-bottom: 0.75rem;
  }
  .hub-components {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }
  .hub-comp {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--text-muted);
    padding: 0.3rem 0.75rem;
    background: rgba(96,165,250,0.08);
    border-radius: 6px;
    border: 1px solid rgba(96,165,250,0.15);
  }

  /* Agents around hub */
  .diagram-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    width: 100%;
    max-width: 900px;
    flex-wrap: wrap;
  }

  .agent-node {
    border-radius: 10px;
    padding: 1px;
    background: var(--border);
    min-width: 160px;
    transition: all 0.3s ease;
  }
  .agent-node:hover {
    background: var(--gradient-1);
    transform: translateY(-2px);
  }
  .agent-node-inner {
    background: var(--bg-card);
    border-radius: 9px;
    padding: 1rem 1.25rem;
    text-align: center;
  }
  .agent-node .agent-name {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 0.25rem;
  }
  .agent-node .agent-caps {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: var(--accent-blue);
  }

  /* Connection lines */
  .conn-lines {
    display: flex;
    justify-content: center;
    gap: 4rem;
    position: relative;
  }
  .conn-line {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
  }
  .conn-vert-line {
    width: 2px;
    height: 24px;
    background: linear-gradient(to bottom, rgba(96,165,250,0.4), rgba(167,139,250,0.4));
  }
  .conn-arrow {
    font-size: 0.75rem;
    color: var(--accent-blue);
    line-height: 1;
  }
  .conn-msg-label {
    font-family: var(--font-mono);
    font-size: 0.6rem;
    color: var(--text-dim);
    margin-top: 0.15rem;
  }

  /* MCP Bridge */
  .mcp-bridge-node {
    border-radius: 10px;
    padding: 1px;
    background: var(--gradient-1);
    min-width: 200px;
  }
  .mcp-bridge-inner {
    background: var(--bg-card);
    border-radius: 9px;
    padding: 1rem 1.5rem;
    text-align: center;
  }
  .mcp-bridge-inner .bridge-label {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--accent-blue);
    margin-bottom: 0.15rem;
  }
  .mcp-bridge-inner .bridge-desc {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: var(--text-dim);
  }

  .claude-node {
    border-radius: 10px;
    padding: 2px;
    background: linear-gradient(135deg, rgba(96,165,250,0.5), rgba(167,139,250,0.5));
    min-width: 180px;
  }
  .claude-node-inner {
    background: var(--bg-card);
    border-radius: 8px;
    padding: 1rem 1.5rem;
    text-align: center;
  }
  .claude-node-inner .claude-label {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--text);
  }
  .claude-node-inner .claude-sub {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: var(--text-dim);
  }

  /* ---- MESSAGE TYPES TABLE ---- */
  .msg-types-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
  .msg-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.25rem 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .msg-card:hover {
    border-color: var(--text-dim);
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
  }
  .msg-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--gradient-1);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .msg-card:hover::before { opacity: 1; }
  .msg-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }
  .msg-type-name {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--accent-blue);
  }
  .msg-direction {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: var(--text-dim);
    padding: 0.15rem 0.5rem;
    background: rgba(96,165,250,0.08);
    border-radius: 4px;
    white-space: nowrap;
  }
  .msg-card p {
    font-size: 0.85rem;
    color: var(--text-muted);
    line-height: 1.5;
  }

  /* Message type color variants */
  .msg-card.msg-core .msg-type-name { color: var(--accent-blue); }
  .msg-card.msg-task .msg-type-name { color: var(--accent-green); }
  .msg-card.msg-system .msg-type-name { color: var(--accent-amber); }
  .msg-card.msg-error .msg-type-name { color: var(--accent-rose); }

  /* ---- CODE EXAMPLES ---- */
  .code-tabs {
    display: flex;
    gap: 0;
    margin-bottom: 0;
  }
  .code-tab {
    padding: 0.6rem 1.5rem;
    font-size: 0.8rem;
    font-weight: 600;
    font-family: var(--font-mono);
    color: var(--text-dim);
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-bottom: none;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    transition: all 0.2s;
    user-select: none;
  }
  .code-tab:not(:first-child) {
    margin-left: -1px;
  }
  .code-tab.active {
    color: var(--accent-blue);
    background: var(--bg-surface);
    border-bottom-color: var(--bg-surface);
    position: relative;
    z-index: 2;
  }
  .code-panel {
    display: none;
  }
  .code-panel.active {
    display: block;
  }
  .code-block {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 0 12px 12px 12px;
    overflow: hidden;
  }
  .code-block-header {
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-dim);
    font-family: var(--font-mono);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .code-block-body {
    padding: 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.82rem;
    line-height: 1.8;
    color: var(--text-muted);
    overflow-x: auto;
  }
  .code-block-body .kw { color: var(--accent-purple); }
  .code-block-body .fn { color: var(--accent-blue); }
  .code-block-body .str { color: var(--accent-green); }
  .code-block-body .dec { color: var(--accent-amber); }
  .code-block-body .cm { color: var(--text-dim); }
  .code-block-body .var { color: var(--text); }
  .code-block-body .op { color: var(--text-muted); }
  .code-block-body .cls { color: var(--accent-rose); }
  .code-block-body .num { color: var(--accent-amber); }

  /* ---- MCP BRIDGE TOOLS ---- */
  .tools-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  .tool-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .tool-card:hover {
    border-color: rgba(96,165,250,0.4);
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
  }
  .tool-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--gradient-1);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .tool-card:hover::before { opacity: 1; }
  .tool-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: rgba(96,165,250,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
    font-size: 1rem;
    color: var(--accent-blue);
  }
  .tool-name {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--accent-blue);
    margin-bottom: 0.4rem;
  }
  .tool-desc {
    font-size: 0.85rem;
    color: var(--text-muted);
    line-height: 1.5;
  }

  /* ---- FEATURES GRID ---- */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }
  .feature-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 2rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .feature-card:hover {
    border-color: var(--text-dim);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.3);
  }
  .feature-number {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--accent-blue);
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
    opacity: 0.6;
  }
  .feature-card h3 {
    font-size: 1.15rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    letter-spacing: -0.01em;
  }
  .feature-card p {
    color: var(--text-muted);
    font-size: 0.9rem;
    line-height: 1.6;
  }
  .feature-card .feature-detail {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-dim);
    margin-top: 0.75rem;
    padding: 0.4rem 0.75rem;
    background: rgba(96,165,250,0.06);
    border-radius: 6px;
    display: inline-block;
  }

  /* ---- ARCHITECTURE MODULES ---- */
  .modules-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  .module-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.5rem;
    transition: all 0.3s ease;
  }
  .module-card:hover {
    border-color: rgba(96,165,250,0.3);
    transform: translateY(-2px);
  }
  .module-file {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--accent-blue);
    margin-bottom: 0.4rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .module-file .file-icon {
    width: 18px;
    height: 18px;
    border-radius: 4px;
    background: rgba(96,165,250,0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
    color: var(--accent-blue);
  }
  .module-desc {
    font-size: 0.85rem;
    color: var(--text-muted);
    line-height: 1.5;
  }

  /* ---- CLI REFERENCE ---- */
  .cli-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  .cli-row {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem 1.5rem;
    transition: all 0.2s;
  }
  .cli-row:hover {
    border-color: rgba(96,165,250,0.3);
    background: var(--bg-card-hover);
  }
  .cli-cmd {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--accent-blue);
    white-space: nowrap;
    min-width: 320px;
  }
  .cli-cmd .flag {
    color: var(--text-dim);
    font-weight: 400;
  }
  .cli-desc {
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  /* ---- QUICKSTART ---- */
  .quickstart-block {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 1.5rem;
  }
  .qs-header {
    padding: 0.75rem 1.25rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-dim);
    font-family: var(--font-mono);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .qs-body {
    padding: 1.25rem;
    font-family: var(--font-mono);
    font-size: 0.85rem;
    line-height: 1.8;
    color: var(--text-muted);
    overflow-x: auto;
  }
  .qs-body .g { color: var(--accent-green); }
  .qs-body .b { color: var(--accent-blue); }
  .qs-body .a { color: var(--accent-amber); }
  .qs-body .p { color: var(--accent-purple); }
  .qs-body .c { color: var(--text-dim); }
  .qs-body .w { color: var(--text); }

  /* ---- TASK LIFECYCLE ---- */
  .lifecycle-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    flex-wrap: wrap;
    padding: 2rem 0;
  }
  .lifecycle-state {
    padding: 0.6rem 1.25rem;
    border-radius: 8px;
    font-family: var(--font-mono);
    font-size: 0.8rem;
    font-weight: 700;
    text-align: center;
  }
  .lifecycle-state.pending {
    background: rgba(96,165,250,0.1);
    border: 1px solid rgba(96,165,250,0.3);
    color: var(--accent-blue);
  }
  .lifecycle-state.in-progress {
    background: rgba(251,191,36,0.1);
    border: 1px solid rgba(251,191,36,0.3);
    color: var(--accent-amber);
  }
  .lifecycle-state.completed {
    background: rgba(52,211,153,0.1);
    border: 1px solid rgba(52,211,153,0.3);
    color: var(--accent-green);
  }
  .lifecycle-state.failed {
    background: rgba(251,113,133,0.1);
    border: 1px solid rgba(251,113,133,0.3);
    color: var(--accent-rose);
  }
  .lifecycle-state.timeout {
    background: rgba(167,139,250,0.1);
    border: 1px solid rgba(167,139,250,0.3);
    color: var(--accent-purple);
  }
  .lifecycle-arrow {
    font-size: 1.25rem;
    color: var(--text-dim);
    padding: 0 0.5rem;
  }
  .lifecycle-branch {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: flex-start;
  }

  /* ---- FOOTER ---- */
  footer {
    padding: 4rem 2rem;
    text-align: center;
    border-top: 1px solid var(--border);
  }
  footer .footer-inner {
    max-width: var(--max-w);
    margin: 0 auto;
  }
  footer .footer-links {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
  }
  footer .footer-links a {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.875rem;
    transition: color 0.2s;
  }
  footer .footer-links a:hover { color: var(--text); }
  footer .footer-note {
    font-size: 0.8rem;
    color: var(--text-dim);
    line-height: 1.8;
  }

  /* ---- ANIMATIONS ---- */
  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .fade-in-delay-1 { transition-delay: 0.1s; }
  .fade-in-delay-2 { transition-delay: 0.2s; }
  .fade-in-delay-3 { transition-delay: 0.3s; }

  /* Glow animation for hub */
  @keyframes hub-glow {
    0%, 100% { box-shadow: 0 0 30px rgba(96,165,250,0.1); }
    50% { box-shadow: 0 0 60px rgba(96,165,250,0.2); }
  }
  .hub-center { animation: hub-glow 4s ease-in-out infinite; }

  /* Data flow animation */
  @keyframes data-flow {
    0% { opacity: 0.3; }
    50% { opacity: 1; }
    100% { opacity: 0.3; }
  }
  .conn-vert-line {
    animation: data-flow 2s ease-in-out infinite;
  }
  .conn-vert-line:nth-child(2) { animation-delay: 0.5s; }
  .conn-vert-line:nth-child(3) { animation-delay: 1s; }

  /* Agent nodes stagger */
  .agent-node:nth-child(1) { animation: fadeSlideUp 0.6s ease 0.2s both; }
  .agent-node:nth-child(2) { animation: fadeSlideUp 0.6s ease 0.35s both; }
  .agent-node:nth-child(3) { animation: fadeSlideUp 0.6s ease 0.5s both; }
  .agent-node:nth-child(4) { animation: fadeSlideUp 0.6s ease 0.65s both; }

  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Floating particles background */
  .particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: 0;
  }
  .particle {
    position: absolute;
    width: 3px;
    height: 3px;
    border-radius: 50%;
    background: var(--accent-blue);
    opacity: 0;
    animation: float-particle linear infinite;
  }
  @keyframes float-particle {
    0% { opacity: 0; transform: translateY(100vh) scale(0); }
    10% { opacity: 0.3; }
    90% { opacity: 0.3; }
    100% { opacity: 0; transform: translateY(-10vh) scale(1); }
  }

  /* ---- RESPONSIVE ---- */
  @media (max-width: 768px) {
    .nav-links { display: none; }
    .hero { padding: 5rem 1.5rem 3rem; }
    .hero h1 { font-size: 2.5rem; }
    section { padding: 4rem 1.5rem; }
    .msg-types-grid { grid-template-columns: 1fr; }
    .tools-grid { grid-template-columns: 1fr; }
    .features-grid { grid-template-columns: 1fr; }
    .modules-grid { grid-template-columns: 1fr; }
    .stats-bar { gap: 2rem; }
    .terminal-body { font-size: 0.75rem; }
    .cli-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
    .cli-cmd { min-width: auto; }
    .diagram-row { gap: 1rem; }
    .lifecycle-flow { gap: 0.5rem; }
    .lifecycle-arrow { padding: 0 0.25rem; font-size: 1rem; }
    .nav-project { display: none; }
    .nav-separator { display: none; }
  }
</style>
</head>
<body>

<!-- FLOATING PARTICLES -->
<div class="particles" id="particles"></div>

<!-- NAV -->
<nav id="nav">
  <div class="nav-inner">
    <div class="nav-left">
      <a href="index.html" class="nav-brand">
        <div class="logo-icon">Cx</div>
        Cortex
      </a>
      <span class="nav-separator">/</span>
      <span class="nav-project">A2A Hub</span>
    </div>
    <ul class="nav-links">
      <li><a href="#protocol">Protocol</a></li>
      <li><a href="#messages">Messages</a></li>
      <li><a href="#sdk">SDK</a></li>
      <li><a href="#bridge">MCP Bridge</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#quickstart">Quick Start</a></li>
      <li><a href="https://github.com/zzhiyuann/a2a-hub" class="nav-cta">GitHub</a></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">
    <span class="dot"></span>
    Communication Layer of Cortex
  </div>
  <h1>
    Agent-to-Agent<br>
    <span class="gradient-text">Protocol Hub</span>
  </h1>
  <p class="subtitle">
    Agents register, discover each other by capabilities, delegate tasks, and get results &mdash;
    all through a lightweight WebSocket protocol. The nervous system your agent network needs.
  </p>
  <div class="hero-actions">
    <a href="#quickstart" class="btn btn-primary">Get Started</a>
    <a href="#protocol" class="btn btn-secondary">See Protocol</a>
  </div>

  <!-- Terminal Preview -->
  <div class="terminal-preview">
    <div class="terminal-bar">
      <div class="terminal-dot red"></div>
      <div class="terminal-dot yellow"></div>
      <div class="terminal-dot green"></div>
      <span class="terminal-title">a2a-hub &mdash; zsh</span>
    </div>
    <div class="terminal-body">
      <span class="comment"># Start the hub</span><br>
      <span class="prompt">$</span> <span class="cmd">a2a-hub start</span><br>
      <span class="output">Hub listening on ws://localhost:8765</span><br>
      <br>
      <span class="comment"># Agents connect and register</span><br>
      <span class="output">Agent registered: code-reviewer [code-review, python]</span><br>
      <span class="output">Agent registered: test-runner [testing, pytest]</span><br>
      <span class="output">Agent registered: doc-writer [documentation, markdown]</span><br>
      <br>
      <span class="comment"># Discover agents by capability</span><br>
      <span class="prompt">$</span> <span class="cmd">a2a-hub agents</span><br>
      <span class="output">3 agents connected &middot; 5 capabilities registered</span><br>
      <br>
      <span class="comment"># Delegate a task</span><br>
      <span class="accent">task:a1b2c3</span> <span class="output">delegated to code-reviewer</span><br>
      <span class="accent">task:a1b2c3</span> <span class="success">COMPLETED in 4.2s</span><br>
    </div>
  </div>
</section>

<!-- STATS -->
<div class="stats-bar fade-in">
  <div class="stat">
    <div class="stat-value">10</div>
    <div class="stat-label">Message Types</div>
  </div>
  <div class="stat">
    <div class="stat-value">6</div>
    <div class="stat-label">MCP Bridge Tools</div>
  </div>
  <div class="stat">
    <div class="stat-value">2</div>
    <div class="stat-label">SDK Styles</div>
  </div>
  <div class="stat">
    <div class="stat-value">0</div>
    <div class="stat-label">Language Lock-in</div>
  </div>
</div>

<!-- PROTOCOL DIAGRAM -->
<section id="protocol" class="fade-in">
  <div class="section-label">Protocol</div>
  <h2 class="section-title">Everything connects through the Hub</h2>
  <p class="section-desc">
    A central WebSocket server manages agent registration, capability-based discovery,
    task delegation, and result routing. Any language can connect.
  </p>

  <div class="protocol-visual">
    <div class="diagram-container">
      <div class="diagram-title">Connected Agents</div>

      <!-- Top row: agents -->
      <div class="diagram-row">
        <div class="agent-node">
          <div class="agent-node-inner">
            <div class="agent-name">code-reviewer</div>
            <div class="agent-caps">code-review, python</div>
          </div>
        </div>
        <div class="agent-node">
          <div class="agent-node-inner">
            <div class="agent-name">test-runner</div>
            <div class="agent-caps">testing, pytest</div>
          </div>
        </div>
        <div class="agent-node">
          <div class="agent-node-inner">
            <div class="agent-name">doc-writer</div>
            <div class="agent-caps">documentation, md</div>
          </div>
        </div>
        <div class="agent-node">
          <div class="agent-node-inner">
            <div class="agent-name">deployer</div>
            <div class="agent-caps">deploy, docker</div>
          </div>
        </div>
      </div>

      <!-- Connection lines -->
      <div class="conn-lines">
        <div class="conn-line">
          <div class="conn-arrow">&darr;</div>
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">REGISTER</div>
        </div>
        <div class="conn-line">
          <div class="conn-arrow">&uarr;&darr;</div>
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">DELEGATE</div>
        </div>
        <div class="conn-line">
          <div class="conn-arrow">&uarr;&darr;</div>
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">RESULT</div>
        </div>
        <div class="conn-line">
          <div class="conn-arrow">&uarr;&darr;</div>
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">HEARTBEAT</div>
        </div>
      </div>

      <!-- Hub center -->
      <div class="hub-center">
        <div class="hub-center-inner">
          <div class="hub-center-title">A2A Hub Server</div>
          <div class="hub-center-port">WebSocket :8765</div>
          <div class="hub-components">
            <div class="hub-comp">Agent Registry (id &rarr; AgentInfo)</div>
            <div class="hub-comp">Task Manager (task_id &rarr; TaskRecord)</div>
            <div class="hub-comp">Message Router</div>
            <div class="hub-comp">Task Cleanup Loop (30s)</div>
          </div>
        </div>
      </div>

      <!-- Connection to MCP Bridge -->
      <div class="conn-lines">
        <div class="conn-line">
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">WebSocket</div>
        </div>
      </div>

      <!-- MCP Bridge -->
      <div class="mcp-bridge-node">
        <div class="mcp-bridge-inner">
          <div class="bridge-label">MCP Bridge</div>
          <div class="bridge-desc">FastMCP &middot; 6 tools &middot; JSON-RPC over stdio</div>
        </div>
      </div>

      <!-- Connection to Claude Code -->
      <div class="conn-lines">
        <div class="conn-line">
          <div class="conn-vert-line"></div>
          <div class="conn-msg-label">stdio</div>
        </div>
      </div>

      <!-- Claude Code -->
      <div class="claude-node">
        <div class="claude-node-inner">
          <div class="claude-label">Claude Code</div>
          <div class="claude-sub">MCP Client &middot; Your AI</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Task Lifecycle -->
  <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">Task Lifecycle</h3>
  <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 1rem;">Every delegated task follows a deterministic state machine.</p>
  <div class="lifecycle-flow">
    <div class="lifecycle-state pending">PENDING</div>
    <div class="lifecycle-arrow">&rarr;</div>
    <div class="lifecycle-state in-progress">IN_PROGRESS</div>
    <div class="lifecycle-arrow">&rarr;</div>
    <div class="lifecycle-branch">
      <div class="lifecycle-state completed">COMPLETED</div>
      <div class="lifecycle-state failed">FAILED</div>
      <div class="lifecycle-state timeout">TIMEOUT</div>
    </div>
  </div>
</section>

<!-- MESSAGE TYPES -->
<section id="messages" class="fade-in">
  <div class="section-label">Protocol Messages</div>
  <h2 class="section-title">10 message types. Complete coverage.</h2>
  <p class="section-desc">
    All messages are Pydantic-validated, JSON-serialized, and routed through the hub.
    Clean, typed, and predictable.
  </p>

  <div class="msg-types-grid">
    <div class="msg-card msg-core">
      <div class="msg-card-header">
        <span class="msg-type-name">REGISTER</span>
        <span class="msg-direction">Agent &rarr; Hub</span>
      </div>
      <p>Join the hub with a name, description, and list of capabilities. Receive an agent ID.</p>
    </div>

    <div class="msg-card msg-core">
      <div class="msg-card-header">
        <span class="msg-type-name">DEREGISTER</span>
        <span class="msg-direction">Agent &rarr; Hub</span>
      </div>
      <p>Gracefully leave the hub. Removes agent from registry and cleans up state.</p>
    </div>

    <div class="msg-card msg-core">
      <div class="msg-card-header">
        <span class="msg-type-name">DISCOVER</span>
        <span class="msg-direction">Agent &rarr; Hub</span>
      </div>
      <p>Find agents by capability keyword. Returns matching agent IDs with their full capability lists.</p>
    </div>

    <div class="msg-card msg-task">
      <div class="msg-card-header">
        <span class="msg-type-name">DELEGATE</span>
        <span class="msg-direction">Agent &rarr; Hub &rarr; Agent</span>
      </div>
      <p>Assign a task to a specific agent. Hub creates a TaskRecord and routes to the target.</p>
    </div>

    <div class="msg-card msg-task">
      <div class="msg-card-header">
        <span class="msg-type-name">RESULT</span>
        <span class="msg-direction">Agent &rarr; Hub &rarr; Agent</span>
      </div>
      <p>Return a task result back to the requester. Includes success status and payload data.</p>
    </div>

    <div class="msg-card msg-system">
      <div class="msg-card-header">
        <span class="msg-type-name">STATUS</span>
        <span class="msg-direction">Agent &harr; Hub</span>
      </div>
      <p>Query the status of a specific task or the overall hub state. Bidirectional.</p>
    </div>

    <div class="msg-card msg-system">
      <div class="msg-card-header">
        <span class="msg-type-name">BROADCAST</span>
        <span class="msg-direction">Agent &rarr; Hub &rarr; All</span>
      </div>
      <p>Send a message to every connected agent. Useful for announcements and coordination.</p>
    </div>

    <div class="msg-card msg-system">
      <div class="msg-card-header">
        <span class="msg-type-name">HEARTBEAT</span>
        <span class="msg-direction">Agent &rarr; Hub</span>
      </div>
      <p>Keep-alive ping sent at 30-second intervals. Maintains connection liveness.</p>
    </div>

    <div class="msg-card msg-system">
      <div class="msg-card-header">
        <span class="msg-type-name">HEARTBEAT_ACK</span>
        <span class="msg-direction">Hub &rarr; Agent</span>
      </div>
      <p>Hub acknowledges the heartbeat. Confirms the connection is healthy and active.</p>
    </div>

    <div class="msg-card msg-error">
      <div class="msg-card-header">
        <span class="msg-type-name">ERROR</span>
        <span class="msg-direction">Hub &rarr; Agent</span>
      </div>
      <p>Error response for invalid requests, unknown agents, or failed operations.</p>
    </div>
  </div>
</section>

<!-- AGENT SDK -->
<section id="sdk" class="fade-in">
  <div class="section-label">Agent SDK</div>
  <h2 class="section-title">Two styles. Same power.</h2>
  <p class="section-desc">
    Build agents with the functional decorator style for quick scripts, or the class-based style
    for complex agents. Both connect to the hub automatically.
  </p>

  <div class="code-tabs" id="sdk-tabs">
    <button class="code-tab active" data-panel="functional">Functional</button>
    <button class="code-tab" data-panel="class-based">Class-Based</button>
  </div>

  <div id="panel-functional" class="code-panel active">
    <div class="code-block">
      <div class="code-block-header">
        <span>agent_echo.py</span>
        <span>Functional Style</span>
      </div>
      <div class="code-block-body">
        <span class="cm"># Simple, fast, decorator-based agents</span><br>
        <span class="kw">from</span> <span class="var">a2a_hub</span> <span class="kw">import</span> <span class="cls">Agent</span><br>
        <br>
        <span class="var">agent</span> <span class="op">=</span> <span class="cls">Agent</span>(<span class="str">"echo-agent"</span>, <span class="var">capabilities</span><span class="op">=</span>[<span class="str">"echo"</span>])<br>
        <br>
        <span class="dec">@agent.on_task</span>(<span class="str">"echo"</span>)<br>
        <span class="kw">async def</span> <span class="fn">handle_echo</span>(<span class="var">message</span>: <span class="cls">str</span> <span class="op">=</span> <span class="str">""</span>) <span class="op">-></span> <span class="cls">dict</span>:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">return</span> {<span class="str">"echo"</span>: <span class="var">message</span>}<br>
        <br>
        <span class="var">agent</span>.<span class="fn">run</span>()<br>
        <br>
        <span class="cm"># That's it. Agent connects, registers, handles tasks.</span><br>
        <span class="cm"># Auto-reconnect, heartbeat, cleanup — all built in.</span>
      </div>
    </div>
  </div>

  <div id="panel-class-based" class="code-panel">
    <div class="code-block">
      <div class="code-block-header">
        <span>agent_reviewer.py</span>
        <span>Class-Based Style</span>
      </div>
      <div class="code-block-body">
        <span class="cm"># Structured agents with multiple capabilities</span><br>
        <span class="kw">from</span> <span class="var">a2a_hub</span> <span class="kw">import</span> <span class="cls">Agent</span>, <span class="fn">capability</span><br>
        <br>
        <span class="kw">class</span> <span class="cls">CodeReviewAgent</span>(<span class="cls">Agent</span>):<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="var">name</span> <span class="op">=</span> <span class="str">"code-reviewer"</span><br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="dec">@capability</span>(<span class="str">"code-review"</span>, <span class="var">description</span><span class="op">=</span><span class="str">"Review Python code"</span>)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">async def</span> <span class="fn">review</span>(<span class="var">self</span>, <span class="var">code</span>: <span class="cls">str</span>) <span class="op">-></span> <span class="cls">dict</span>:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="var">issues</span> <span class="op">=</span> <span class="fn">analyze</span>(<span class="var">code</span>)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">return</span> {<span class="str">"issues"</span>: <span class="var">issues</span>, <span class="str">"score"</span>: <span class="num">8.5</span>}<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="dec">@capability</span>(<span class="str">"lint"</span>, <span class="var">description</span><span class="op">=</span><span class="str">"Lint Python files"</span>)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">async def</span> <span class="fn">lint</span>(<span class="var">self</span>, <span class="var">path</span>: <span class="cls">str</span>) <span class="op">-></span> <span class="cls">dict</span>:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="var">results</span> <span class="op">=</span> <span class="fn">run_linter</span>(<span class="var">path</span>)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">return</span> {<span class="str">"warnings"</span>: <span class="var">results</span>}<br>
        <br>
        <span class="var">agent</span> <span class="op">=</span> <span class="cls">CodeReviewAgent</span>()<br>
        <span class="var">agent</span>.<span class="fn">run</span>()<br>
        <br>
        <span class="cm"># Multiple capabilities, shared state, clean structure.</span><br>
        <span class="cm"># Both styles produce identical protocol behavior.</span>
      </div>
    </div>
  </div>
</section>

<!-- MCP BRIDGE -->
<section id="bridge" class="fade-in">
  <div class="section-label">MCP Bridge</div>
  <h2 class="section-title">Claude Code meets the agent network</h2>
  <p class="section-desc">
    The MCP bridge exposes 6 tools that let Claude Code interact with the entire
    agent network. Discover, delegate, broadcast &mdash; all from your AI assistant.
  </p>

  <div class="tools-grid">
    <div class="tool-card">
      <div class="tool-icon">&#9635;</div>
      <div class="tool-name">hub_status</div>
      <div class="tool-desc">Show all registered agents and total task count. Quick health check for the network.</div>
    </div>

    <div class="tool-card">
      <div class="tool-icon">&#9906;</div>
      <div class="tool-name">discover_agents</div>
      <div class="tool-desc">Find agents by capability keyword. Returns matching agents with their full capability lists.</div>
    </div>

    <div class="tool-card">
      <div class="tool-icon">&#10132;</div>
      <div class="tool-name">delegate_task</div>
      <div class="tool-desc">Assign a task to a specific agent by ID. Creates tracked task with automatic timeout.</div>
    </div>

    <div class="tool-card">
      <div class="tool-icon">&#9201;</div>
      <div class="tool-name">get_task_result</div>
      <div class="tool-desc">Poll for a task result with configurable timeout. Blocks until result or expiry.</div>
    </div>

    <div class="tool-card">
      <div class="tool-icon">&#9881;</div>
      <div class="tool-name">broadcast_message</div>
      <div class="tool-desc">Send a message to every connected agent simultaneously. For coordination and announcements.</div>
    </div>

    <div class="tool-card">
      <div class="tool-icon">&#9776;</div>
      <div class="tool-name">list_tasks</div>
      <div class="tool-desc">List all tracked tasks with their current status, age, and assigned agents.</div>
    </div>
  </div>

  <!-- MCP Usage Example -->
  <div style="margin-top: 2rem;">
    <div class="code-block" style="border-radius: 12px;">
      <div class="code-block-header">
        <span>Claude Code Session</span>
        <span>Using MCP Bridge</span>
      </div>
      <div class="code-block-body">
        <span class="cm"># Claude Code can now talk to your agent network:</span><br>
        <br>
        <span class="cm"># "Find me an agent that can review code"</span><br>
        <span class="fn">discover_agents</span>(<span class="var">capability</span><span class="op">=</span><span class="str">"code-review"</span>)<br>
        <span class="cm"># &rarr; [{id: "agent-1", name: "code-reviewer", capabilities: [...]}]</span><br>
        <br>
        <span class="cm"># "Ask it to review this file"</span><br>
        <span class="var">task</span> <span class="op">=</span> <span class="fn">delegate_task</span>(<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="var">agent_id</span><span class="op">=</span><span class="str">"agent-1"</span>,<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="var">capability</span><span class="op">=</span><span class="str">"code-review"</span>,<br>
        &nbsp;&nbsp;&nbsp;&nbsp;<span class="var">payload</span><span class="op">=</span>{<span class="str">"code"</span>: <span class="str">"def hello(): ..."</span>}<br>
        )<br>
        <br>
        <span class="cm"># "Get the result"</span><br>
        <span class="var">result</span> <span class="op">=</span> <span class="fn">get_task_result</span>(<span class="var">task_id</span><span class="op">=</span><span class="var">task</span>[<span class="str">"task_id"</span>], <span class="var">timeout</span><span class="op">=</span><span class="num">30</span>)<br>
        <span class="cm"># &rarr; {issues: [...], score: 8.5}</span>
      </div>
    </div>
  </div>
</section>

<!-- KEY FEATURES -->
<section id="features" class="fade-in">
  <div class="section-label">Features</div>
  <h2 class="section-title">Built for real agent networks</h2>
  <p class="section-desc">
    Not a toy protocol. Production-ready features for reliability,
    discoverability, and seamless integration.
  </p>

  <div class="features-grid">
    <div class="feature-card">
      <div class="feature-number">01</div>
      <h3>Capability-Based Discovery</h3>
      <p>Agents register what they can do, not who they are. Need code review? Search by capability, not by name. The right agent surfaces automatically.</p>
      <div class="feature-detail">DISCOVER &rarr; match capabilities &rarr; return agents</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">02</div>
      <h3>Task Lifecycle Management</h3>
      <p>Every task has a deterministic lifecycle: PENDING, IN_PROGRESS, COMPLETED, FAILED, or TIMEOUT. Full state tracking with automatic transitions.</p>
      <div class="feature-detail">TaskRecord with created_at, updated_at, TTL</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">03</div>
      <h3>TTL-Based Cleanup</h3>
      <p>Tasks auto-expire after their time-to-live. A background cleanup loop runs every 30 seconds, preventing stale task accumulation.</p>
      <div class="feature-detail">Default TTL: 300s &middot; Cleanup: 30s interval</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">04</div>
      <h3>Auto-Reconnect</h3>
      <p>Agents automatically reconnect on disconnect with exponential backoff. No manual intervention needed &mdash; the network self-heals.</p>
      <div class="feature-detail">5s &times; min(attempt, 5) &middot; max 10 attempts</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">05</div>
      <h3>Heartbeat Keep-Alive</h3>
      <p>30-second interval heartbeats maintain connection liveness. Hub detects stale connections and cleans up disconnected agents.</p>
      <div class="feature-detail">HEARTBEAT &rarr; HEARTBEAT_ACK &middot; 30s cycle</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">06</div>
      <h3>MCP Bridge Integration</h3>
      <p>Claude Code interacts with the agent network through 6 MCP tools. Discover agents, delegate tasks, get results &mdash; all from your AI assistant.</p>
      <div class="feature-detail">FastMCP &middot; JSON-RPC over stdio</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">07</div>
      <h3>Broadcast Messaging</h3>
      <p>Send a message to every connected agent simultaneously. Perfect for coordination signals, configuration updates, or shutdown notices.</p>
      <div class="feature-detail">BROADCAST &rarr; Hub &rarr; All connected agents</div>
    </div>

    <div class="feature-card">
      <div class="feature-number">08</div>
      <h3>Language Agnostic</h3>
      <p>Any language that speaks WebSocket can connect. Python SDK included, but the protocol is simple JSON &mdash; build clients in any language.</p>
      <div class="feature-detail">WebSocket + JSON &middot; No language lock-in</div>
    </div>
  </div>
</section>

<!-- ARCHITECTURE / MODULES -->
<section id="architecture" class="fade-in">
  <div class="section-label">Architecture</div>
  <h2 class="section-title">Clean module structure</h2>
  <p class="section-desc">
    Six focused modules. Each does one thing well. Pydantic types flow through everything.
  </p>

  <div class="modules-grid">
    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">P</div>
        protocol.py
      </div>
      <div class="module-desc">Pydantic message types for all 10 protocol messages. Type-safe serialization, validation, and helper constructors.</div>
    </div>

    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">S</div>
        server.py
      </div>
      <div class="module-desc">HubServer class. WebSocket listener, agent registry, task manager, message router, and background cleanup loop.</div>
    </div>

    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">A</div>
        agent.py
      </div>
      <div class="module-desc">Agent SDK with both class-based and functional decorator styles. Auto-reconnect, heartbeat, and task handler registration.</div>
    </div>

    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">M</div>
        mcp_bridge.py
      </div>
      <div class="module-desc">FastMCP bridge exposing 6 tools for Claude Code integration. Connects to the hub as a special client.</div>
    </div>

    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">C</div>
        cli.py
      </div>
      <div class="module-desc">Click-based CLI with 5 commands: start, bridge, status, agents, tasks. Full hub management from the terminal.</div>
    </div>

    <div class="module-card">
      <div class="module-file">
        <div class="file-icon">U</div>
        utils.py
      </div>
      <div class="module-desc">Shared constants, logger configuration, and utility functions. Default ports, timeouts, and retry parameters.</div>
    </div>
  </div>
</section>

<!-- CLI REFERENCE -->
<section id="cli" class="fade-in">
  <div class="section-label">CLI Reference</div>
  <h2 class="section-title">Five commands. Full control.</h2>
  <p class="section-desc">
    Manage the hub, start the bridge, and inspect state &mdash; all from your terminal.
  </p>

  <div class="cli-grid">
    <div class="cli-row">
      <div class="cli-cmd">a2a-hub start <span class="flag">[--host HOST] [--port PORT]</span></div>
      <div class="cli-desc">Start the WebSocket hub server. Default: localhost:8765.</div>
    </div>
    <div class="cli-row">
      <div class="cli-cmd">a2a-hub bridge <span class="flag">[--host HOST] [--port PORT]</span></div>
      <div class="cli-desc">Start the MCP bridge server. Connects to the hub and exposes tools via stdio.</div>
    </div>
    <div class="cli-row">
      <div class="cli-cmd">a2a-hub status <span class="flag">[--host HOST] [--port PORT]</span></div>
      <div class="cli-desc">Query hub status: connected agents count, active tasks, uptime.</div>
    </div>
    <div class="cli-row">
      <div class="cli-cmd">a2a-hub agents <span class="flag">[--host HOST] [--port PORT]</span></div>
      <div class="cli-desc">List all connected agents with their IDs, names, and capabilities.</div>
    </div>
    <div class="cli-row">
      <div class="cli-cmd">a2a-hub tasks <span class="flag">[--host HOST] [--port PORT]</span></div>
      <div class="cli-desc">List all tracked tasks with status, assigned agent, and age.</div>
    </div>
  </div>
</section>

<!-- QUICK START -->
<section id="quickstart" class="fade-in">
  <div class="section-label">Quick Start</div>
  <h2 class="section-title">Up and running in 60 seconds</h2>
  <p class="section-desc">
    Install, start the hub, create an agent, connect from Claude Code.
  </p>

  <div class="quickstart-block">
    <div class="qs-header">
      <span>1 &mdash; Install</span>
      <span>Python 3.11+</span>
    </div>
    <div class="qs-body">
      <span class="w">pip install</span> <span class="b">a2a-hub</span><br>
      <br>
      <span class="c"># Or from source:</span><br>
      <span class="w">git clone</span> <span class="b">https://github.com/zzhiyuann/a2a-hub.git</span><br>
      <span class="w">cd</span> <span class="b">a2a-hub</span> <span class="c">&amp;&amp;</span> <span class="w">pip install</span> <span class="b">-e .</span>
    </div>
  </div>

  <div class="quickstart-block">
    <div class="qs-header">
      <span>2 &mdash; Start the Hub</span>
    </div>
    <div class="qs-body">
      <span class="w">a2a-hub</span> <span class="a">start</span><br>
      <br>
      <span class="g">Hub listening on ws://localhost:8765</span><br>
      <span class="g">Task cleanup loop started (30s interval)</span><br>
      <span class="g">Waiting for agents...</span>
    </div>
  </div>

  <div class="quickstart-block">
    <div class="qs-header">
      <span>3 &mdash; Create an Agent</span>
      <span>my_agent.py</span>
    </div>
    <div class="qs-body">
      <span class="kw">from</span> <span class="w">a2a_hub</span> <span class="kw">import</span> <span class="b">Agent</span><br>
      <br>
      <span class="w">agent</span> <span class="op">=</span> <span class="b">Agent</span>(<span class="g">"my-agent"</span>, <span class="w">capabilities</span><span class="op">=</span>[<span class="g">"greet"</span>])<br>
      <br>
      <span class="a">@agent.on_task</span>(<span class="g">"greet"</span>)<br>
      <span class="kw">async def</span> <span class="b">handle</span>(<span class="w">name</span>: <span class="p">str</span> <span class="op">=</span> <span class="g">"world"</span>) -> <span class="p">dict</span>:<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">return</span> {<span class="g">"greeting"</span>: <span class="g">f"Hello, </span><span class="w">{name}</span><span class="g">!"</span>}<br>
      <br>
      <span class="w">agent</span>.<span class="b">run</span>()<br>
      <br>
      <span class="c"># In another terminal:</span><br>
      <span class="w">python</span> <span class="b">my_agent.py</span><br>
      <span class="g">Connected to hub &middot; Registered as my-agent</span>
    </div>
  </div>

  <div class="quickstart-block">
    <div class="qs-header">
      <span>4 &mdash; Connect from Claude Code</span>
    </div>
    <div class="qs-body">
      <span class="c"># Add to your MCP config (~/.claude/settings.json):</span><br>
      {<br>
      &nbsp;&nbsp;<span class="g">"mcpServers"</span>: {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<span class="g">"a2a-hub"</span>: {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="g">"command"</span>: <span class="g">"a2a-hub"</span>,<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="g">"args"</span>: [<span class="g">"bridge"</span>]<br>
      &nbsp;&nbsp;&nbsp;&nbsp;}<br>
      &nbsp;&nbsp;}<br>
      }<br>
      <br>
      <span class="c"># Now Claude Code can use:</span><br>
      <span class="b">hub_status</span>() <span class="c">&rarr; 1 agent, 0 tasks</span><br>
      <span class="b">discover_agents</span>(<span class="g">"greet"</span>) <span class="c">&rarr; [{name: "my-agent", ...}]</span><br>
      <span class="b">delegate_task</span>(<span class="g">"agent-id"</span>, <span class="g">"greet"</span>, {<span class="g">"name"</span>: <span class="g">"Claude"</span>})<br>
      <span class="b">get_task_result</span>(<span class="g">"task-id"</span>)<br>
      <span class="c">&rarr;</span> <span class="g">{"greeting": "Hello, Claude!"}</span>
    </div>
  </div>
</section>

<!-- TECHNICAL SPECS -->
<div class="stats-bar fade-in" style="margin-bottom: 0;">
  <div class="stat">
    <div class="stat-value">3.11+</div>
    <div class="stat-label">Python Version</div>
  </div>
  <div class="stat">
    <div class="stat-value">4</div>
    <div class="stat-label">Dependencies</div>
  </div>
  <div class="stat">
    <div class="stat-value">100%</div>
    <div class="stat-label">Async</div>
  </div>
  <div class="stat">
    <div class="stat-value">Pydantic</div>
    <div class="stat-label">Validated</div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-links">
      <a href="index.html">Cortex Home</a>
      <a href="https://github.com/zzhiyuann/dispatcher">Dispatcher</a>
      <a href="https://github.com/zzhiyuann/a2a-hub">A2A Hub</a>
      <a href="https://github.com/zzhiyuann/forge">Forge</a>
      <a href="https://github.com/zzhiyuann/vibe-replay">Vibe Replay</a>
      <a href="https://github.com/zzhiyuann">GitHub</a>
    </div>
    <p class="footer-note">
      A2A Hub is part of <strong style="color:var(--text);">Cortex</strong> &mdash; personal agent infrastructure.<br>
      Open source under the MIT License.<br><br>
      <span style="color: var(--text-dim);">
        Dependencies: websockets&gt;=14.0 &middot; pydantic&gt;=2.0 &middot; click&gt;=8.0 &middot; fastmcp&gt;=2.0
      </span>
    </p>
  </div>
</footer>

<!-- JS -->
<script>
  // Nav scroll effect
  const nav = document.getElementById('nav');
  window.addEventListener('scroll', () => {
    nav.classList.toggle('scrolled', window.scrollY > 20);
  });

  // Fade-in on scroll (IntersectionObserver)
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.08 });

  document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

  // SDK code tabs
  document.querySelectorAll('#sdk-tabs .code-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      const panel = tab.dataset.panel;
      // Update tabs
      document.querySelectorAll('#sdk-tabs .code-tab').forEach(t => {
        t.classList.toggle('active', t.dataset.panel === panel);
      });
      // Update panels
      document.querySelectorAll('.code-panel').forEach(p => {
        p.classList.toggle('active', p.id === 'panel-' + panel);
      });
    });
  });

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', (e) => {
      e.preventDefault();
      const target = document.querySelector(a.getAttribute('href'));
      if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });

  // Floating particles
  (function createParticles() {
    const container = document.getElementById('particles');
    const count = 20;
    for (let i = 0; i < count; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (8 + Math.random() * 12) + 's';
      p.style.animationDelay = (Math.random() * 10) + 's';
      p.style.width = p.style.height = (2 + Math.random() * 2) + 'px';
      if (Math.random() > 0.5) p.style.background = 'var(--accent-purple)';
      container.appendChild(p);
    }
  })();

  // Stagger message cards on scroll
  const msgObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const cards = entry.target.querySelectorAll('.msg-card');
        cards.forEach((card, i) => {
          card.style.opacity = '0';
          card.style.transform = 'translateY(15px)';
          card.style.transition = `opacity 0.5s ease ${i * 0.06}s, transform 0.5s ease ${i * 0.06}s`;
          requestAnimationFrame(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          });
        });
        msgObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  const msgGrid = document.querySelector('.msg-types-grid');
  if (msgGrid) msgObserver.observe(msgGrid);

  // Stagger tool cards
  const toolObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const cards = entry.target.querySelectorAll('.tool-card');
        cards.forEach((card, i) => {
          card.style.opacity = '0';
          card.style.transform = 'translateY(15px)';
          card.style.transition = `opacity 0.5s ease ${i * 0.08}s, transform 0.5s ease ${i * 0.08}s`;
          requestAnimationFrame(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          });
        });
        toolObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  const toolGrid = document.querySelector('.tools-grid');
  if (toolGrid) toolObserver.observe(toolGrid);

  // Stagger feature cards
  const featureObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const cards = entry.target.querySelectorAll('.feature-card');
        cards.forEach((card, i) => {
          card.style.opacity = '0';
          card.style.transform = 'translateY(15px)';
          card.style.transition = `opacity 0.5s ease ${i * 0.07}s, transform 0.5s ease ${i * 0.07}s`;
          requestAnimationFrame(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          });
        });
        featureObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  const featureGrid = document.querySelector('.features-grid');
  if (featureGrid) featureObserver.observe(featureGrid);
</script>

</body>
</html>
